# 一些实验性的想法

有些是在实现过程中发现并不是十分有效所以弃用的方案，还有一些是赛后以及答辩交流时学习的一些 ML 以及 DL 的新知识进而产生的一些新想法

## Mask 机制

### 分块比对机制

在早期设计（动手之前）的时候，设计了分为上中下三块的分别比对机制（当时在代码里称为 `tag` 机制，随便起的名字啦）以应对残缺现象，具体的设计思路如下

如果两张图像同位置残缺都比较大，则该位置不参与比对，最终的距离函数评估如下式

$$
L = \frac{\sum_{i=0}^n m_i l(a_i, b_i)}{\sum_{i=0}^n m_i}
$$

其中 $l$ 为两向量之间距离评估函数，比如 $l_2$ 等等，$n$ 为分块数量，$a$ 和 $b$ 分别为待比对的两个 $n \times c$ 的 Embedding （$c$ 为最终 Embedding 的通道数），$m = m_a \& m_b$ 是两个 Embedding 源图片块掩码的与

但由于早期设计问题，误认为当时网络已经效果非常好，同时考虑到这种机制的 Loss 必然难搭，就暂时放弃了，后来只用了残缺模板的 Mask 机制，这种就全然弃用了（是个意外，我甚至没尝试过该方案……），不过两位学长都使用了类似的想法

### 残缺模板机制

是比前面的分块比对更加细粒度的模板机制[$^{[1]}$](#references)，不止在竖直方向进行分块，是在整个二维空间上划分网格，其余与上面相同

事实上我并没有完整实现这样的想法，我只是将残缺模板作为一个掩码信息（尝试过离线模板与在线模板），在网络的接近输出层进行过滤，将残缺部位的特征过滤掉，让网络在最后几层自学习这种残缺的效果，以提高残缺图像的识别率，但是效果并不好，就弃用了

### 注意力机制 <font color=#000080><sup>TODO</sup></font>

> 主要参考足迹赛道肖迪学长在答辩时分享的网络结构

现在网络中将 Mask 机制替换掉的是参考 Mobile Net 使用 DW CONV 替代 Average Pooling ，这种方法**也许**可以看作是一种简单的空间注意力机制，结合最后的 Maxout 激活可能是有着更好的效果（只是个人的猜想）

如果进一步使用类似于 SENet 那种通道上的注意力机制，也许会使得网络对于残缺图像的泛化能力更强（模型更加着眼于某些花纹特征而不是那些残缺区域）

当然，在空间注意力机制上也可以不仅仅着眼于最后一层，该方式也许可以完全替代 Mask 机制

## 更深的网络深度

虽然网络深度的加深往往有着更好的效果，但是更深的网络使得每个 batch 会更小（受限于显存大小），模型更难收敛，经 ModelV3、ModelV5 的测试，取消该方案

## 优化 Batch Normalization <font color=#000080><sup>TODO</sup></font>

### 使用 GN 替代 BN

根据 GN 的效果描述，它可以用于解决 BN 在少量 `mini-batch size` 下效果差的问题，很符合现状

### 使用 SELU 替代 ReLU

利用 SELU 的特性实现 BN 的效果

## 在线扩增数据 <font color=#000080><sup>TODO</sup></font>

使用在线扩增方式对数据进行扩增，但这必然会增加数据处理的时间，需要运算足够快的 CPU 或者显存足够大的 GPU

## 更改 Loss 计算方式 <font color=#000080><sup>TODO</sup></font>

使用 Auto Encoder 或者 Siamese Network 以降低网络的复杂度，如果在资源有限的情况下应该有着更好的效果，但是在资源足够的情况下并不是最佳选择

# References {docsify-ignore}

1. 卜凡杰. [鞋印图像特征提取及检索方法研究](https://kns.cnki.net/KCMS/detail/detail.aspx?dbcode=CMFD&dbname=CMFD201901&filename=1018717266.nh)
